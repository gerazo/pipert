<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PipeRT: pipert::AdaptiveSpinLock Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PipeRT
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A hybrid scheduling and dataflow framework for DSP applications</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classpipert_1_1AdaptiveSpinLock.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classpipert_1_1AdaptiveSpinLock-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">pipert::AdaptiveSpinLock Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>(<em>Part of internal implementation. </em> 
 <a href="classpipert_1_1AdaptiveSpinLock.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="AdaptiveSpinLock_8h_source.html">AdaptiveSpinLock.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a79e4f0d00ec19294448d278f99e6df14"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpipert_1_1AdaptiveSpinLock.html#a79e4f0d00ec19294448d278f99e6df14">AdaptiveSpinLock</a> (const int spins_before_yield=<a class="el" href="classpipert_1_1AdaptiveSpinLock.html#af807a701dd67146f850afe9d31132ef8">kSpinsBeforeYield</a>)</td></tr>
<tr class="memdesc:a79e4f0d00ec19294448d278f99e6df14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct an <a class="el" href="classpipert_1_1AdaptiveSpinLock.html" title="(Part of internal implementation.">AdaptiveSpinLock</a> mutex.  <a href="classpipert_1_1AdaptiveSpinLock.html#a79e4f0d00ec19294448d278f99e6df14">More...</a><br /></td></tr>
<tr class="separator:a79e4f0d00ec19294448d278f99e6df14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1bdc37af154dcbda295f5bd56e75896"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpipert_1_1AdaptiveSpinLock.html#af1bdc37af154dcbda295f5bd56e75896">AdaptiveSpinLock</a> (const <a class="el" href="classpipert_1_1AdaptiveSpinLock.html">AdaptiveSpinLock</a> &amp;)=delete</td></tr>
<tr class="separator:af1bdc37af154dcbda295f5bd56e75896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a540eebdbfcfab110ffbd497313b58f7e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classpipert_1_1AdaptiveSpinLock.html">AdaptiveSpinLock</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpipert_1_1AdaptiveSpinLock.html#a540eebdbfcfab110ffbd497313b58f7e">operator=</a> (const <a class="el" href="classpipert_1_1AdaptiveSpinLock.html">AdaptiveSpinLock</a> &amp;)=delete</td></tr>
<tr class="separator:a540eebdbfcfab110ffbd497313b58f7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab85239b5c24fe7c4b306e2088a4b58a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpipert_1_1AdaptiveSpinLock.html#ab85239b5c24fe7c4b306e2088a4b58a6">lock</a> ()</td></tr>
<tr class="memdesc:ab85239b5c24fe7c4b306e2088a4b58a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire the lock of this mutex by actively waiting with minimal delay until success.  <a href="classpipert_1_1AdaptiveSpinLock.html#ab85239b5c24fe7c4b306e2088a4b58a6">More...</a><br /></td></tr>
<tr class="separator:ab85239b5c24fe7c4b306e2088a4b58a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33abde79e7968ee57dd45a5548f48b4c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpipert_1_1AdaptiveSpinLock.html#a33abde79e7968ee57dd45a5548f48b4c">try_lock</a> ()</td></tr>
<tr class="memdesc:a33abde79e7968ee57dd45a5548f48b4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to acquire mutex lock and return without delay.  <a href="classpipert_1_1AdaptiveSpinLock.html#a33abde79e7968ee57dd45a5548f48b4c">More...</a><br /></td></tr>
<tr class="separator:a33abde79e7968ee57dd45a5548f48b4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbfb8e22b9bcf8fc3f2e02c09cfbc2dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpipert_1_1AdaptiveSpinLock.html#adbfb8e22b9bcf8fc3f2e02c09cfbc2dd">unlock</a> ()</td></tr>
<tr class="memdesc:adbfb8e22b9bcf8fc3f2e02c09cfbc2dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the lock of this mutex.  <a href="classpipert_1_1AdaptiveSpinLock.html#adbfb8e22b9bcf8fc3f2e02c09cfbc2dd">More...</a><br /></td></tr>
<tr class="separator:adbfb8e22b9bcf8fc3f2e02c09cfbc2dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:af807a701dd67146f850afe9d31132ef8"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpipert_1_1AdaptiveSpinLock.html#af807a701dd67146f850afe9d31132ef8">kSpinsBeforeYield</a> = 256</td></tr>
<tr class="memdesc:af807a701dd67146f850afe9d31132ef8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default number of cycles to spin before giving up the rest of the timeslice.  <a href="classpipert_1_1AdaptiveSpinLock.html#af807a701dd67146f850afe9d31132ef8">More...</a><br /></td></tr>
<tr class="separator:af807a701dd67146f850afe9d31132ef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>(<em>Part of internal implementation. </em></p>
<p>) A mutex implementing a real-time spinlock behavior that tries to not lose its timeslice by avoiding OS calls.</p>
<p><a class="el" href="classpipert_1_1AdaptiveSpinLock.html" title="(Part of internal implementation.">AdaptiveSpinLock</a> implements <em>BasicLockable</em> and <em>Lockable</em> requirements of <em>C++11</em>, and as such, it is perfectly usable with <code>std::lock_guard</code>, <code>std::unique_lock</code> and similar mutex wrappers.</p>
<p>It uses <code>std::atomic_flag</code> to guarantee HW support for synchronization. On request, it actively waits for the lock to be released by other threads, but after a certain cycle count, it gives back the rest of the timeslice to the OS in order to avoid draining battery or becoming a CPU hog. Use this for short operations to minimize delay in other threads. </p>

<p class="definition">Definition at line <a class="el" href="AdaptiveSpinLock_8h_source.html#l00021">21</a> of file <a class="el" href="AdaptiveSpinLock_8h_source.html">AdaptiveSpinLock.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a79e4f0d00ec19294448d278f99e6df14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79e4f0d00ec19294448d278f99e6df14">&#9670;&nbsp;</a></span>AdaptiveSpinLock() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pipert::AdaptiveSpinLock::AdaptiveSpinLock </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>spins_before_yield</em> = <code><a class="el" href="classpipert_1_1AdaptiveSpinLock.html#af807a701dd67146f850afe9d31132ef8">kSpinsBeforeYield</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct an <a class="el" href="classpipert_1_1AdaptiveSpinLock.html" title="(Part of internal implementation.">AdaptiveSpinLock</a> mutex. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spins_before_yield</td><td>An optional parameter that corresponds to the amount of cycles the lock will spin for while trying to lock its mutex. Because of differences between specific hardware and the behavior of OS schedulers, the optimal setting for this parameter changes between use cases. It is only useful to experiment with this parameter if you really know what you are doing, and even then, it will probably require quite some experimentation to find the setting most suitable for your particular use case. Higher values will result in more busy waiting for locks and therefore more wasted CPU time, while lower values will shorten the time before a the lock gives up its timeslice, possibly leading to higher delay on lock acquisitions. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="AdaptiveSpinLock_8cpp_source.html#l00007">7</a> of file <a class="el" href="AdaptiveSpinLock_8cpp_source.html">AdaptiveSpinLock.cpp</a>.</p>

</div>
</div>
<a id="af1bdc37af154dcbda295f5bd56e75896"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1bdc37af154dcbda295f5bd56e75896">&#9670;&nbsp;</a></span>AdaptiveSpinLock() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pipert::AdaptiveSpinLock::AdaptiveSpinLock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classpipert_1_1AdaptiveSpinLock.html">AdaptiveSpinLock</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab85239b5c24fe7c4b306e2088a4b58a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab85239b5c24fe7c4b306e2088a4b58a6">&#9670;&nbsp;</a></span>lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pipert::AdaptiveSpinLock::lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquire the lock of this mutex by actively waiting with minimal delay until success. </p>

<p class="definition">Definition at line <a class="el" href="AdaptiveSpinLock_8cpp_source.html#l00013">13</a> of file <a class="el" href="AdaptiveSpinLock_8cpp_source.html">AdaptiveSpinLock.cpp</a>.</p>

</div>
</div>
<a id="a540eebdbfcfab110ffbd497313b58f7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a540eebdbfcfab110ffbd497313b58f7e">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classpipert_1_1AdaptiveSpinLock.html">AdaptiveSpinLock</a>&amp; pipert::AdaptiveSpinLock::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classpipert_1_1AdaptiveSpinLock.html">AdaptiveSpinLock</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a33abde79e7968ee57dd45a5548f48b4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33abde79e7968ee57dd45a5548f48b4c">&#9670;&nbsp;</a></span>try_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool pipert::AdaptiveSpinLock::try_lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to acquire mutex lock and return without delay. </p>
<dl class="section return"><dt>Returns</dt><dd>True if lock was acquired successfully. </dd></dl>

<p class="definition">Definition at line <a class="el" href="AdaptiveSpinLock_8cpp_source.html#l00023">23</a> of file <a class="el" href="AdaptiveSpinLock_8cpp_source.html">AdaptiveSpinLock.cpp</a>.</p>

</div>
</div>
<a id="adbfb8e22b9bcf8fc3f2e02c09cfbc2dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbfb8e22b9bcf8fc3f2e02c09cfbc2dd">&#9670;&nbsp;</a></span>unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pipert::AdaptiveSpinLock::unlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release the lock of this mutex. </p>

<p class="definition">Definition at line <a class="el" href="AdaptiveSpinLock_8cpp_source.html#l00027">27</a> of file <a class="el" href="AdaptiveSpinLock_8cpp_source.html">AdaptiveSpinLock.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af807a701dd67146f850afe9d31132ef8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af807a701dd67146f850afe9d31132ef8">&#9670;&nbsp;</a></span>kSpinsBeforeYield</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int pipert::AdaptiveSpinLock::kSpinsBeforeYield = 256</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default number of cycles to spin before giving up the rest of the timeslice. </p>

<p class="definition">Definition at line <a class="el" href="AdaptiveSpinLock_8h_source.html#l00025">25</a> of file <a class="el" href="AdaptiveSpinLock_8h_source.html">AdaptiveSpinLock.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/pipert/pipert/src/<a class="el" href="AdaptiveSpinLock_8h_source.html">AdaptiveSpinLock.h</a></li>
<li>/home/runner/work/pipert/pipert/src/<a class="el" href="AdaptiveSpinLock_8cpp_source.html">AdaptiveSpinLock.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacepipert.html">pipert</a></li><li class="navelem"><a class="el" href="classpipert_1_1AdaptiveSpinLock.html">AdaptiveSpinLock</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
